<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: rules_assumptions_bpmn Pages: 1 -->
<svg width="1204pt" height="1786pt"
 viewBox="0.00 0.00 1204.00 1786.02" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1782.02)">
<title>rules_assumptions_bpmn</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1782.02 1200,-1782.02 1200,4 -4,4"/>
<text text-anchor="middle" x="598" y="-1762.62" font-family="Times,serif" font-size="12.00">portage&#45;ng: grouped dependency resolution + assumption diagnosis (BPMN&#45;style)</text>
<g id="clust1" class="cluster">
<title>cluster_rules</title>
<polygon fill="none" stroke="#888888" points="8,-551.75 8,-1747.77 550,-1747.77 550,-551.75 8,-551.75"/>
<text text-anchor="middle" x="279" y="-1732.37" font-family="Times,serif" font-size="12.00">rules.pl : rule(grouped_package_dependency(no,C,N,PackageDeps):Action?{Context}, Conditions)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_explain</title>
<polygon fill="none" stroke="#888888" points="558,-8 558,-1046.51 1188,-1046.51 1188,-8 558,-8"/>
<text text-anchor="middle" x="873" y="-1031.11" font-family="Times,serif" font-size="12.00">explanation.pl : assumption_reason_for_grouped_dep/6 (only on fallback)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_update</title>
<polygon fill="none" stroke="#888888" points="691,-1164.64 691,-1747.77 1055,-1747.77 1055,-1164.64 691,-1164.64"/>
<text text-anchor="middle" x="873" y="-1732.37" font-family="Times,serif" font-size="12.00">rules.pl : update policy (transactional replace&#45;in&#45;slot + &#45;&#45;deep dep updates)</text>
</g>
<!-- r_start -->
<g id="node1" class="node">
<title>r_start</title>
<ellipse fill="none" stroke="black" cx="110" cy="-1696.52" rx="21.01" ry="21.01"/>
<text text-anchor="middle" x="110" y="-1692.64" font-family="Helvetica,sans-Serif" font-size="10.00">start</text>
</g>
<!-- r_self_run -->
<g id="node2" class="node">
<title>r_self_run</title>
<polygon fill="none" stroke="black" points="110,-1638.51 24.25,-1608.01 110,-1577.51 195.75,-1608.01 110,-1638.51"/>
<text text-anchor="middle" x="110" y="-1609.76" font-family="Helvetica,sans-Serif" font-size="10.00">Action == run</text>
<text text-anchor="middle" x="110" y="-1598.51" font-family="Helvetica,sans-Serif" font-size="10.00">AND self(C,N)?</text>
</g>
<!-- r_start&#45;&gt;r_self_run -->
<g id="edge1" class="edge">
<title>r_start&#45;&gt;r_self_run</title>
<path fill="none" stroke="black" d="M110,-1675.02C110,-1666.67 110,-1656.74 110,-1647.15"/>
<polygon fill="black" stroke="black" points="112.45,-1647.38 110,-1640.38 107.55,-1647.38 112.45,-1647.38"/>
</g>
<!-- r_ok1 -->
<g id="node3" class="node">
<title>r_ok1</title>
<polygon fill="none" stroke="black" points="161.75,-1519.26 30.25,-1519.26 30.25,-1483.26 161.75,-1483.26 161.75,-1519.26"/>
<text text-anchor="middle" x="96" y="-1503.01" font-family="Helvetica,sans-Serif" font-size="10.00">Conditions = []</text>
<text text-anchor="middle" x="96" y="-1491.76" font-family="Helvetica,sans-Serif" font-size="10.00">(runtime self&#45;dep satisfied)</text>
</g>
<!-- r_self_run&#45;&gt;r_ok1 -->
<g id="edge2" class="edge">
<title>r_self_run&#45;&gt;r_ok1</title>
<path fill="none" stroke="black" d="M106.17,-1578.39C104.06,-1562.54 101.45,-1543.02 99.4,-1527.71"/>
<polygon fill="black" stroke="black" points="101.89,-1527.8 98.53,-1521.19 97.03,-1528.45 101.89,-1527.8"/>
<text text-anchor="middle" x="110.54" y="-1550.96" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- r_installed -->
<g id="node4" class="node">
<title>r_installed</title>
<polygon fill="none" stroke="black" points="335,-1531.76 179.5,-1501.26 335,-1470.76 490.5,-1501.26 335,-1531.76"/>
<text text-anchor="middle" x="335" y="-1503.01" font-family="Helvetica,sans-Serif" font-size="10.00">Already installed?</text>
<text text-anchor="middle" x="335" y="-1491.76" font-family="Helvetica,sans-Serif" font-size="10.00">OR (emptytree AND core_pkg)?</text>
</g>
<!-- r_self_run&#45;&gt;r_installed -->
<g id="edge3" class="edge">
<title>r_self_run&#45;&gt;r_installed</title>
<path fill="none" stroke="black" d="M146.4,-1590.06C183.17,-1572.95 240.34,-1546.33 282.11,-1526.88"/>
<polygon fill="black" stroke="black" points="283.04,-1529.15 288.35,-1523.98 280.97,-1524.71 283.04,-1529.15"/>
<text text-anchor="middle" x="234.5" y="-1550.96" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- r_ok2 -->
<g id="node5" class="node">
<title>r_ok2</title>
<polygon fill="none" stroke="black" points="247.62,-1412.51 154.38,-1412.51 154.38,-1376.51 247.62,-1376.51 247.62,-1412.51"/>
<text text-anchor="middle" x="201" y="-1396.26" font-family="Helvetica,sans-Serif" font-size="10.00">Conditions = []</text>
<text text-anchor="middle" x="201" y="-1385.01" font-family="Helvetica,sans-Serif" font-size="10.00">(already satisfied)</text>
</g>
<!-- r_installed&#45;&gt;r_ok2 -->
<g id="edge4" class="edge">
<title>r_installed&#45;&gt;r_ok2</title>
<path fill="none" stroke="black" d="M304.59,-1476.49C282.2,-1458.99 251.94,-1435.33 229.91,-1418.11"/>
<polygon fill="black" stroke="black" points="231.57,-1416.3 224.55,-1413.92 228.55,-1420.16 231.57,-1416.3"/>
<text text-anchor="middle" x="279.14" y="-1444.21" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- r_slotreq -->
<g id="node6" class="node">
<title>r_slotreq</title>
<polygon fill="none" stroke="black" points="440.12,-1412.51 265.88,-1412.51 265.88,-1376.51 440.12,-1376.51 440.12,-1412.51"/>
<text text-anchor="middle" x="353" y="-1390.64" font-family="Helvetica,sans-Serif" font-size="10.00">SlotReq = merge_slot_restriction(...)</text>
</g>
<!-- r_installed&#45;&gt;r_slotreq -->
<g id="edge5" class="edge">
<title>r_installed&#45;&gt;r_slotreq</title>
<path fill="none" stroke="black" d="M339.97,-1471.36C342.69,-1455.52 346.03,-1436.07 348.65,-1420.83"/>
<polygon fill="black" stroke="black" points="350.99,-1421.65 349.76,-1414.34 346.16,-1420.82 350.99,-1421.65"/>
<text text-anchor="middle" x="349.79" y="-1444.21" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- r_self_hosting -->
<g id="node7" class="node">
<title>r_self_hosting</title>
<polygon fill="none" stroke="black" points="353,-1318.26 170.5,-1287.76 353,-1257.26 535.5,-1287.76 353,-1318.26"/>
<text text-anchor="middle" x="353" y="-1289.51" font-family="Helvetica,sans-Serif" font-size="10.00">Self&#45;hosting?</text>
<text text-anchor="middle" x="353" y="-1278.26" font-family="Helvetica,sans-Serif" font-size="10.00">(Action != run AND self matches C/N)</text>
</g>
<!-- r_slotreq&#45;&gt;r_self_hosting -->
<g id="edge6" class="edge">
<title>r_slotreq&#45;&gt;r_self_hosting</title>
<path fill="none" stroke="black" d="M353,-1376.21C353,-1362.73 353,-1343.51 353,-1326.52"/>
<polygon fill="black" stroke="black" points="355.45,-1326.9 353,-1319.9 350.55,-1326.9 355.45,-1326.9"/>
</g>
<!-- r_query -->
<g id="node8" class="node">
<title>r_query</title>
<polygon fill="none" stroke="black" points="368,-1211.51 214,-1211.51 214,-1169.76 368,-1169.76 368,-1211.51"/>
<text text-anchor="middle" x="291" y="-1198.01" font-family="Helvetica,sans-Serif" font-size="10.00">query:search candidates</text>
<text text-anchor="middle" x="291" y="-1186.76" font-family="Helvetica,sans-Serif" font-size="10.00">(name/category/keyword + slot)</text>
<text text-anchor="middle" x="291" y="-1175.51" font-family="Helvetica,sans-Serif" font-size="10.00">(+ installed(true) if self&#45;hosting)</text>
</g>
<!-- r_self_hosting&#45;&gt;r_query -->
<g id="edge7" class="edge">
<title>r_self_hosting&#45;&gt;r_query</title>
<path fill="none" stroke="black" d="M295.89,-1266.42C284.39,-1259.6 273.76,-1250.72 267,-1239.26 263.2,-1232.82 264.19,-1225.7 267.32,-1218.97"/>
<polygon fill="black" stroke="black" points="269.28,-1220.47 270.68,-1213.19 265.04,-1218.01 269.28,-1220.47"/>
<text text-anchor="middle" x="304.5" y="-1230.71" font-family="Helvetica,sans-Serif" font-size="9.00">yes: installed(true)</text>
</g>
<!-- r_self_hosting&#45;&gt;r_query -->
<g id="edge8" class="edge">
<title>r_self_hosting&#45;&gt;r_query</title>
<path fill="none" stroke="black" d="M351.54,-1257.27C350.01,-1247.85 347.17,-1237.74 342,-1229.51 339.27,-1225.16 335.84,-1221.14 332.06,-1217.47"/>
<polygon fill="black" stroke="black" points="333.88,-1215.81 327.01,-1213 330.63,-1219.48 333.88,-1215.81"/>
<text text-anchor="middle" x="351.53" y="-1230.71" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- r_reject_self -->
<g id="node9" class="node">
<title>r_reject_self</title>
<polygon fill="none" stroke="black" points="120,-1121.14 16.24,-1103.14 120,-1085.14 223.76,-1103.14 120,-1121.14"/>
<text text-anchor="middle" x="120" y="-1099.26" font-family="Helvetica,sans-Serif" font-size="10.00">Candidate == SelfEntry?</text>
</g>
<!-- r_query&#45;&gt;r_reject_self -->
<g id="edge9" class="edge">
<title>r_query&#45;&gt;r_reject_self</title>
<path fill="none" stroke="black" d="M250.48,-1169.37C220.86,-1154.57 181.19,-1134.73 153.4,-1120.83"/>
<polygon fill="black" stroke="black" points="154.6,-1118.7 147.24,-1117.76 152.41,-1123.08 154.6,-1118.7"/>
</g>
<!-- r_fallback -->
<g id="node15" class="node">
<title>r_fallback</title>
<polygon fill="none" stroke="black" points="542.25,-1124.01 341.75,-1124.01 341.75,-1082.26 542.25,-1082.26 542.25,-1124.01"/>
<text text-anchor="middle" x="442" y="-1110.51" font-family="Helvetica,sans-Serif" font-size="10.00">No candidate found &#45;&gt;</text>
<text text-anchor="middle" x="442" y="-1099.26" font-family="Helvetica,sans-Serif" font-size="10.00">assumed(grouped_package_dependency...</text>
<text text-anchor="middle" x="442" y="-1088.01" font-family="Helvetica,sans-Serif" font-size="10.00">+ assumption_reason(...))</text>
</g>
<!-- r_query&#45;&gt;r_fallback -->
<g id="edge18" class="edge">
<title>r_query&#45;&gt;r_fallback</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M326.78,-1169.37C348.43,-1157.12 376.15,-1141.42 398.98,-1128.49"/>
<polygon fill="black" stroke="black" points="400.01,-1130.73 404.89,-1125.15 397.6,-1126.46 400.01,-1130.73"/>
<text text-anchor="middle" x="411.53" y="-1143.21" font-family="Helvetica,sans-Serif" font-size="9.00">no more candidates</text>
</g>
<!-- r_reject_self2 -->
<g id="node10" class="node">
<title>r_reject_self2</title>
<polygon fill="none" stroke="black" points="198,-1013.26 91.73,-995.26 198,-977.26 304.27,-995.26 198,-1013.26"/>
<text text-anchor="middle" x="198" y="-991.38" font-family="Helvetica,sans-Serif" font-size="10.00">Candidate installed(true)?</text>
</g>
<!-- r_reject_self&#45;&gt;r_reject_self2 -->
<g id="edge10" class="edge">
<title>r_reject_self&#45;&gt;r_reject_self2</title>
<path fill="none" stroke="black" d="M131.18,-1086.97C144.36,-1069.06 166.41,-1039.14 181.55,-1018.58"/>
<polygon fill="black" stroke="black" points="183.51,-1020.05 185.69,-1012.96 179.57,-1017.14 183.51,-1020.05"/>
<text text-anchor="middle" x="161.45" y="-1055.71" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- r_versions -->
<g id="node11" class="node">
<title>r_versions</title>
<polygon fill="none" stroke="black" points="198,-928.5 35.75,-898 198,-867.5 360.25,-898 198,-928.5"/>
<text text-anchor="middle" x="198" y="-899.75" font-family="Helvetica,sans-Serif" font-size="10.00">forall version constraints</text>
<text text-anchor="middle" x="198" y="-888.5" font-family="Helvetica,sans-Serif" font-size="10.00">query:search(select(version,O,V))</text>
</g>
<!-- r_reject_self&#45;&gt;r_versions -->
<g id="edge11" class="edge">
<title>r_reject_self&#45;&gt;r_versions</title>
<path fill="none" stroke="black" d="M102.89,-1088.06C91.89,-1077.83 78.56,-1062.95 72.5,-1046.51 61.39,-1016.38 56.67,-1002.19 72.5,-974.25 85.89,-950.61 109.99,-933.59 133.51,-921.79"/>
<polygon fill="black" stroke="black" points="134.5,-924.03 139.75,-918.79 132.38,-919.61 134.5,-924.03"/>
<text text-anchor="middle" x="77.75" y="-991.58" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- r_reject_self2&#45;&gt;r_query -->
<g id="edge13" class="edge">
<title>r_reject_self2&#45;&gt;r_query</title>
<path fill="none" stroke="black" d="M205.78,-1012.43C221.65,-1045.42 257.9,-1120.82 277.63,-1161.83"/>
<polygon fill="black" stroke="black" points="275.33,-1162.7 280.57,-1167.94 279.74,-1160.57 275.33,-1162.7"/>
<text text-anchor="middle" x="280.39" y="-1099.46" font-family="Helvetica,sans-Serif" font-size="9.00">no: try next</text>
</g>
<!-- r_reject_self2&#45;&gt;r_versions -->
<g id="edge12" class="edge">
<title>r_reject_self2&#45;&gt;r_versions</title>
<path fill="none" stroke="black" d="M198,-976.78C198,-965.66 198,-950.82 198,-937.08"/>
<polygon fill="black" stroke="black" points="200.45,-937.22 198,-930.22 195.55,-937.22 200.45,-937.22"/>
<text text-anchor="middle" x="205.12" y="-947.7" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- r_versions&#45;&gt;r_query -->
<g id="edge15" class="edge">
<title>r_versions&#45;&gt;r_query</title>
<path fill="none" stroke="black" d="M249.95,-919.13C273.7,-931.26 299.5,-949.27 313,-974.25 345.67,-1034.67 320.49,-1118.57 303.41,-1161.65"/>
<polygon fill="black" stroke="black" points="301.17,-1160.64 300.79,-1168.05 305.71,-1162.49 301.17,-1160.64"/>
<text text-anchor="middle" x="350.69" y="-1055.71" font-family="Helvetica,sans-Serif" font-size="9.00">no: try next</text>
</g>
<!-- r_build_use -->
<g id="node12" class="node">
<title>r_build_use</title>
<polygon fill="none" stroke="black" points="265.62,-809.25 130.38,-809.25 130.38,-773.25 265.62,-773.25 265.62,-809.25"/>
<text text-anchor="middle" x="198" y="-793" font-family="Helvetica,sans-Serif" font-size="10.00">process_build_with_use(...)</text>
<text text-anchor="middle" x="198" y="-781.75" font-family="Helvetica,sans-Serif" font-size="10.00">(add Constraints + context)</text>
</g>
<!-- r_versions&#45;&gt;r_build_use -->
<g id="edge14" class="edge">
<title>r_versions&#45;&gt;r_build_use</title>
<path fill="none" stroke="black" d="M198,-867.26C198,-851.69 198,-832.81 198,-817.89"/>
<polygon fill="black" stroke="black" points="200.45,-818.13 198,-811.13 195.55,-818.13 200.45,-818.13"/>
<text text-anchor="middle" x="205.12" y="-840.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- r_process_slot -->
<g id="node13" class="node">
<title>r_process_slot</title>
<polygon fill="none" stroke="black" points="254.38,-702.5 141.62,-702.5 141.62,-666.5 254.38,-666.5 254.38,-702.5"/>
<text text-anchor="middle" x="198" y="-686.25" font-family="Helvetica,sans-Serif" font-size="10.00">process_slot(...)</text>
<text text-anchor="middle" x="198" y="-675" font-family="Helvetica,sans-Serif" font-size="10.00">(annotate chosen slot)</text>
</g>
<!-- r_build_use&#45;&gt;r_process_slot -->
<g id="edge16" class="edge">
<title>r_build_use&#45;&gt;r_process_slot</title>
<path fill="none" stroke="black" d="M198,-772.95C198,-756.12 198,-730.35 198,-711.13"/>
<polygon fill="black" stroke="black" points="200.45,-711.34 198,-704.34 195.55,-711.34 200.45,-711.34"/>
</g>
<!-- r_success -->
<g id="node14" class="node">
<title>r_success</title>
<polygon fill="none" stroke="black" points="267.88,-595.75 128.12,-595.75 128.12,-559.75 267.88,-559.75 267.88,-595.75"/>
<text text-anchor="middle" x="198" y="-579.5" font-family="Helvetica,sans-Serif" font-size="10.00">Conditions = Constraints ++</text>
<text text-anchor="middle" x="198" y="-568.25" font-family="Helvetica,sans-Serif" font-size="10.00">[Candidate:Action?{Ctx}]</text>
</g>
<!-- r_process_slot&#45;&gt;r_success -->
<g id="edge17" class="edge">
<title>r_process_slot&#45;&gt;r_success</title>
<path fill="none" stroke="black" d="M198,-666.2C198,-649.37 198,-623.6 198,-604.38"/>
<polygon fill="black" stroke="black" points="200.45,-604.59 198,-597.59 195.55,-604.59 200.45,-604.59"/>
</g>
<!-- e_start -->
<g id="node16" class="node">
<title>e_start</title>
<ellipse fill="none" stroke="black" cx="630" cy="-995.26" rx="21.01" ry="21.01"/>
<text text-anchor="middle" x="630" y="-991.38" font-family="Helvetica,sans-Serif" font-size="10.00">start</text>
</g>
<!-- r_fallback&#45;&gt;e_start -->
<g id="edge19" class="edge">
<title>r_fallback&#45;&gt;e_start</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M486,-1081.83C506.92,-1071.79 532.08,-1059.14 554,-1046.51 572.02,-1036.13 591.58,-1023.15 606.34,-1012.99"/>
<polygon fill="black" stroke="black" points="607.58,-1015.11 611.93,-1009.11 604.78,-1011.09 607.58,-1015.11"/>
<text text-anchor="middle" x="573.66" y="-1055.71" font-family="Helvetica,sans-Serif" font-size="9.00">diagnose reason</text>
</g>
<!-- e_any -->
<g id="node17" class="node">
<title>e_any</title>
<polygon fill="none" stroke="black" points="674,-928.5 566.5,-898 674,-867.5 781.5,-898 674,-928.5"/>
<text text-anchor="middle" x="674" y="-899.75" font-family="Helvetica,sans-Serif" font-size="10.00">Any package exists?</text>
<text text-anchor="middle" x="674" y="-888.5" font-family="Helvetica,sans-Serif" font-size="10.00">(category+name)</text>
</g>
<!-- e_start&#45;&gt;e_any -->
<g id="edge29" class="edge">
<title>e_start&#45;&gt;e_any</title>
<path fill="none" stroke="black" d="M638.48,-975.89C644.14,-963.64 651.74,-947.18 658.46,-932.63"/>
<polygon fill="black" stroke="black" points="660.54,-933.99 661.25,-926.61 656.09,-931.94 660.54,-933.99"/>
</g>
<!-- e_missing -->
<g id="node18" class="node">
<title>e_missing</title>
<polygon fill="none" stroke="black" points="670.75,-809.25 575.25,-809.25 575.25,-773.25 670.75,-773.25 670.75,-809.25"/>
<text text-anchor="middle" x="623" y="-787.38" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = missing</text>
</g>
<!-- e_any&#45;&gt;e_missing -->
<g id="edge30" class="edge">
<title>e_any&#45;&gt;e_missing</title>
<path fill="none" stroke="black" d="M661.26,-870.84C653.25,-854.38 642.97,-833.27 635.09,-817.08"/>
<polygon fill="black" stroke="black" points="637.36,-816.15 632.09,-810.92 632.95,-818.29 637.36,-816.15"/>
<text text-anchor="middle" x="655.28" y="-840.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_need_inst -->
<g id="node19" class="node">
<title>e_need_inst</title>
<polygon fill="none" stroke="black" points="794,-821.75 688.75,-791.25 794,-760.75 899.25,-791.25 794,-821.75"/>
<text text-anchor="middle" x="794" y="-793" font-family="Helvetica,sans-Serif" font-size="10.00">Self&#45;hosting requires</text>
<text text-anchor="middle" x="794" y="-781.75" font-family="Helvetica,sans-Serif" font-size="10.00">installed&#45;only?</text>
</g>
<!-- e_any&#45;&gt;e_need_inst -->
<g id="edge31" class="edge">
<title>e_any&#45;&gt;e_need_inst</title>
<path fill="none" stroke="black" d="M699.74,-874.53C717.93,-858.65 742.44,-837.26 761.91,-820.26"/>
<polygon fill="black" stroke="black" points="763.5,-822.13 767.16,-815.68 760.27,-818.44 763.5,-822.13"/>
<text text-anchor="middle" x="744.72" y="-840.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_inst_empty -->
<g id="node20" class="node">
<title>e_inst_empty</title>
<polygon fill="none" stroke="black" points="693,-715 619.25,-684.5 693,-654 766.75,-684.5 693,-715"/>
<text text-anchor="middle" x="693" y="-686.25" font-family="Helvetica,sans-Serif" font-size="10.00">Installed&#45;only</text>
<text text-anchor="middle" x="693" y="-675" font-family="Helvetica,sans-Serif" font-size="10.00">set empty?</text>
</g>
<!-- e_need_inst&#45;&gt;e_inst_empty -->
<g id="edge32" class="edge">
<title>e_need_inst&#45;&gt;e_inst_empty</title>
<path fill="none" stroke="black" d="M771.58,-767C756.16,-751.01 735.61,-729.69 719.39,-712.87"/>
<polygon fill="black" stroke="black" points="721.31,-711.33 714.68,-707.99 717.78,-714.73 721.31,-711.33"/>
<text text-anchor="middle" x="753.65" y="-734.2" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_unmasked1 -->
<g id="node22" class="node">
<title>e_unmasked1</title>
<polygon fill="none" stroke="black" points="803,-608.25 721.75,-577.75 803,-547.25 884.25,-577.75 803,-608.25"/>
<text text-anchor="middle" x="803" y="-579.5" font-family="Helvetica,sans-Serif" font-size="10.00">Any unmasked</text>
<text text-anchor="middle" x="803" y="-568.25" font-family="Helvetica,sans-Serif" font-size="10.00">candidates?</text>
</g>
<!-- e_need_inst&#45;&gt;e_unmasked1 -->
<g id="edge33" class="edge">
<title>e_need_inst&#45;&gt;e_unmasked1</title>
<path fill="none" stroke="black" d="M795.25,-760.84C796.85,-723.22 799.63,-658.01 801.39,-616.69"/>
<polygon fill="black" stroke="black" points="803.83,-616.86 801.68,-609.76 798.93,-616.65 803.83,-616.86"/>
<text text-anchor="middle" x="804.94" y="-680.83" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_inst_req -->
<g id="node21" class="node">
<title>e_inst_req</title>
<polygon fill="none" stroke="black" points="703.75,-595.75 566.25,-595.75 566.25,-559.75 703.75,-559.75 703.75,-595.75"/>
<text text-anchor="middle" x="635" y="-573.88" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = installed_required</text>
</g>
<!-- e_inst_empty&#45;&gt;e_inst_req -->
<g id="edge34" class="edge">
<title>e_inst_empty&#45;&gt;e_inst_req</title>
<path fill="none" stroke="black" d="M679.55,-659.2C670.26,-642.43 657.96,-620.21 648.63,-603.37"/>
<polygon fill="black" stroke="black" points="650.84,-602.31 645.31,-597.37 646.56,-604.68 650.84,-602.31"/>
<text text-anchor="middle" x="672.86" y="-627.45" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_inst_empty&#45;&gt;e_unmasked1 -->
<g id="edge35" class="edge">
<title>e_inst_empty&#45;&gt;e_unmasked1</title>
<path fill="none" stroke="black" d="M714.73,-662.8C731.83,-646.52 755.81,-623.69 774.46,-605.93"/>
<polygon fill="black" stroke="black" points="776.08,-607.77 779.46,-601.17 772.7,-604.22 776.08,-607.77"/>
<text text-anchor="middle" x="756.55" y="-627.45" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_masked -->
<g id="node23" class="node">
<title>e_masked</title>
<polygon fill="none" stroke="black" points="690.12,-264.25 593.88,-264.25 593.88,-228.25 690.12,-228.25 690.12,-264.25"/>
<text text-anchor="middle" x="642" y="-242.38" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = masked</text>
</g>
<!-- e_unmasked1&#45;&gt;e_masked -->
<g id="edge36" class="edge">
<title>e_unmasked1&#45;&gt;e_masked</title>
<path fill="none" stroke="black" d="M765.97,-560.64C740.57,-547.9 707.83,-527.87 687,-501.5 633.13,-433.31 635.04,-322.6 639.14,-272.87"/>
<polygon fill="black" stroke="black" points="641.57,-273.29 639.76,-266.1 636.69,-272.85 641.57,-273.29"/>
<text text-anchor="middle" x="654.86" y="-413.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_slot_any -->
<g id="node24" class="node">
<title>e_slot_any</title>
<polygon fill="none" stroke="black" points="803,-501.5 695.5,-471 803,-440.5 910.5,-471 803,-501.5"/>
<text text-anchor="middle" x="803" y="-472.75" font-family="Helvetica,sans-Serif" font-size="10.00">Slot constraint yields</text>
<text text-anchor="middle" x="803" y="-461.5" font-family="Helvetica,sans-Serif" font-size="10.00">any candidates?</text>
</g>
<!-- e_unmasked1&#45;&gt;e_slot_any -->
<g id="edge37" class="edge">
<title>e_unmasked1&#45;&gt;e_slot_any</title>
<path fill="none" stroke="black" d="M803,-546.73C803,-535.24 803,-521.98 803,-509.84"/>
<polygon fill="black" stroke="black" points="805.45,-510.17 803,-503.17 800.55,-510.17 805.45,-510.17"/>
<text text-anchor="middle" x="810.12" y="-520.7" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_slot_bad -->
<g id="node25" class="node">
<title>e_slot_bad</title>
<polygon fill="none" stroke="black" points="788,-382.25 658,-382.25 658,-346.25 788,-346.25 788,-382.25"/>
<text text-anchor="middle" x="723" y="-360.38" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = slot_unsatisfied</text>
</g>
<!-- e_slot_any&#45;&gt;e_slot_bad -->
<g id="edge38" class="edge">
<title>e_slot_any&#45;&gt;e_slot_bad</title>
<path fill="none" stroke="black" d="M784.24,-445.44C771.2,-428.36 753.9,-405.71 741.02,-388.84"/>
<polygon fill="black" stroke="black" points="743.26,-387.74 737.06,-383.66 739.36,-390.71 743.26,-387.74"/>
<text text-anchor="middle" x="770.65" y="-413.95" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_unmasked2 -->
<g id="node26" class="node">
<title>e_unmasked2</title>
<polygon fill="none" stroke="black" points="893,-394.75 805.75,-364.25 893,-333.75 980.25,-364.25 893,-394.75"/>
<text text-anchor="middle" x="893" y="-366" font-family="Helvetica,sans-Serif" font-size="10.00">Any unmasked</text>
<text text-anchor="middle" x="893" y="-354.75" font-family="Helvetica,sans-Serif" font-size="10.00">slot candidates?</text>
</g>
<!-- e_slot_any&#45;&gt;e_unmasked2 -->
<g id="edge39" class="edge">
<title>e_slot_any&#45;&gt;e_unmasked2</title>
<path fill="none" stroke="black" d="M823.65,-445.97C836.84,-430.61 854.03,-410.6 868,-394.35"/>
<polygon fill="black" stroke="black" points="869.68,-396.15 872.39,-389.24 865.97,-392.95 869.68,-396.15"/>
<text text-anchor="middle" x="857.82" y="-413.95" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_unmasked2&#45;&gt;e_masked -->
<g id="edge40" class="edge">
<title>e_unmasked2&#45;&gt;e_masked</title>
<path fill="none" stroke="black" d="M851.42,-347.99C814.04,-333.82 757.96,-311.43 711,-288 699.57,-282.3 687.46,-275.44 676.64,-269"/>
<polygon fill="black" stroke="black" points="677.93,-266.92 670.66,-265.4 675.4,-271.11 677.93,-266.92"/>
<text text-anchor="middle" x="775.24" y="-307.2" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_versions -->
<g id="node27" class="node">
<title>e_versions</title>
<polygon fill="none" stroke="black" points="884,-288 719.5,-246.25 884,-204.5 1048.5,-246.25 884,-288"/>
<text text-anchor="middle" x="884" y="-253.62" font-family="Helvetica,sans-Serif" font-size="10.00">Version constraints analysis</text>
<text text-anchor="middle" x="884" y="-242.38" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; no candidate for some constraint</text>
<text text-anchor="middle" x="884" y="-231.12" font-family="Helvetica,sans-Serif" font-size="10.00">&#45; or conflict</text>
</g>
<!-- e_unmasked2&#45;&gt;e_versions -->
<g id="edge41" class="edge">
<title>e_unmasked2&#45;&gt;e_versions</title>
<path fill="none" stroke="black" d="M890.75,-334.28C889.86,-322.72 888.8,-309.08 887.79,-296.08"/>
<polygon fill="black" stroke="black" points="890.24,-295.96 887.25,-289.17 885.35,-296.33 890.24,-295.96"/>
<text text-anchor="middle" x="896.43" y="-307.2" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- e_ver_nocand -->
<g id="node28" class="node">
<title>e_ver_nocand</title>
<polygon fill="none" stroke="black" points="759.5,-146.25 566.5,-146.25 566.5,-110.25 759.5,-110.25 759.5,-146.25"/>
<text text-anchor="middle" x="663" y="-124.38" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = version_no_candidate(Op,Ver)</text>
</g>
<!-- e_versions&#45;&gt;e_ver_nocand -->
<g id="edge42" class="edge">
<title>e_versions&#45;&gt;e_ver_nocand</title>
<path fill="none" stroke="black" d="M831.06,-217.47C791.96,-196.94 739.52,-169.41 703.67,-150.6"/>
<polygon fill="black" stroke="black" points="704.96,-148.51 697.63,-147.43 702.69,-152.85 704.96,-148.51"/>
<text text-anchor="middle" x="793.87" y="-177.95" font-family="Helvetica,sans-Serif" font-size="9.00">no&#45;candidate</text>
</g>
<!-- e_ver_conflict -->
<g id="node29" class="node">
<title>e_ver_conflict</title>
<polygon fill="none" stroke="black" points="908,-146.25 778,-146.25 778,-110.25 908,-110.25 908,-146.25"/>
<text text-anchor="middle" x="843" y="-124.38" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = version_conflict</text>
</g>
<!-- e_versions&#45;&gt;e_ver_conflict -->
<g id="edge43" class="edge">
<title>e_versions&#45;&gt;e_ver_conflict</title>
<path fill="none" stroke="black" d="M868.61,-208.13C865.8,-200.99 862.98,-193.55 860.5,-186.5 856.86,-176.16 853.25,-164.62 850.26,-154.63"/>
<polygon fill="black" stroke="black" points="852.67,-154.13 848.34,-148.11 847.97,-155.52 852.67,-154.13"/>
<text text-anchor="middle" x="874.75" y="-177.95" font-family="Helvetica,sans-Serif" font-size="9.00">conflict</text>
</g>
<!-- e_keywords -->
<g id="node30" class="node">
<title>e_keywords</title>
<polygon fill="none" stroke="black" points="1053,-158.75 926,-128.25 1053,-97.75 1180,-128.25 1053,-158.75"/>
<text text-anchor="middle" x="1053" y="-130" font-family="Helvetica,sans-Serif" font-size="10.00">Any candidate matches</text>
<text text-anchor="middle" x="1053" y="-118.75" font-family="Helvetica,sans-Serif" font-size="10.00">ACCEPT_KEYWORDS?</text>
</g>
<!-- e_versions&#45;&gt;e_keywords -->
<g id="edge44" class="edge">
<title>e_versions&#45;&gt;e_keywords</title>
<path fill="none" stroke="black" d="M927.52,-215.38C954.28,-197.01 988.26,-173.69 1014.11,-155.94"/>
<polygon fill="black" stroke="black" points="1015.2,-158.16 1019.59,-152.18 1012.43,-154.12 1015.2,-158.16"/>
<text text-anchor="middle" x="1014.76" y="-177.95" font-family="Helvetica,sans-Serif" font-size="9.00">has candidates</text>
</g>
<!-- e_kw -->
<g id="node31" class="node">
<title>e_kw</title>
<polygon fill="none" stroke="black" points="984.5,-52 851.5,-52 851.5,-16 984.5,-16 984.5,-52"/>
<text text-anchor="middle" x="918" y="-30.12" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = keyword_filtered</text>
</g>
<!-- e_keywords&#45;&gt;e_kw -->
<g id="edge45" class="edge">
<title>e_keywords&#45;&gt;e_kw</title>
<path fill="none" stroke="black" d="M1020.66,-105.15C999.36,-90.6 971.57,-71.61 950.28,-57.06"/>
<polygon fill="black" stroke="black" points="951.73,-55.08 944.57,-53.16 948.97,-59.13 951.73,-55.08"/>
<text text-anchor="middle" x="986.7" y="-71.2" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- e_other -->
<g id="node32" class="node">
<title>e_other</title>
<polygon fill="none" stroke="black" points="1165.12,-52 1002.88,-52 1002.88,-16 1165.12,-16 1165.12,-52"/>
<text text-anchor="middle" x="1084" y="-30.12" font-family="Helvetica,sans-Serif" font-size="10.00">Reason = unsatisfied_constraints</text>
</g>
<!-- e_keywords&#45;&gt;e_other -->
<g id="edge46" class="edge">
<title>e_keywords&#45;&gt;e_other</title>
<path fill="none" stroke="black" d="M1062.3,-99.57C1066.47,-87.15 1071.37,-72.6 1075.45,-60.45"/>
<polygon fill="black" stroke="black" points="1077.73,-61.34 1077.64,-53.92 1073.09,-59.78 1077.73,-61.34"/>
<text text-anchor="middle" x="1127.69" y="-71.2" font-family="Helvetica,sans-Serif" font-size="9.00">yes (but resolver still failed)</text>
</g>
<!-- u_start -->
<g id="node33" class="node">
<title>u_start</title>
<ellipse fill="none" stroke="black" cx="979" cy="-1696.52" rx="21.01" ry="21.01"/>
<text text-anchor="middle" x="979" y="-1692.64" font-family="Helvetica,sans-Serif" font-size="10.00">start</text>
</g>
<!-- u_is_deep -->
<g id="node34" class="node">
<title>u_is_deep</title>
<polygon fill="none" stroke="black" points="979,-1626.01 936.11,-1608.01 979,-1590.01 1021.89,-1608.01 979,-1626.01"/>
<text text-anchor="middle" x="979" y="-1604.14" font-family="Helvetica,sans-Serif" font-size="10.00">&#45;&#45;deep ?</text>
</g>
<!-- u_start&#45;&gt;u_is_deep -->
<g id="edge20" class="edge">
<title>u_start&#45;&gt;u_is_deep</title>
<path fill="none" stroke="black" d="M979,-1675.02C979,-1663 979,-1647.71 979,-1634.87"/>
<polygon fill="black" stroke="black" points="981.45,-1634.96 979,-1627.96 976.55,-1634.96 981.45,-1634.96"/>
</g>
<!-- u_dep_installed -->
<g id="node35" class="node">
<title>u_dep_installed</title>
<polygon fill="none" stroke="black" points="904,-1519.26 790.82,-1501.26 904,-1483.26 1017.18,-1501.26 904,-1519.26"/>
<text text-anchor="middle" x="904" y="-1497.39" font-family="Helvetica,sans-Serif" font-size="10.00">dependency installed(true)?</text>
</g>
<!-- u_is_deep&#45;&gt;u_dep_installed -->
<g id="edge21" class="edge">
<title>u_is_deep&#45;&gt;u_dep_installed</title>
<path fill="none" stroke="black" d="M969.5,-1593.74C957.04,-1576.33 934.98,-1545.53 919.94,-1524.52"/>
<polygon fill="black" stroke="black" points="922.08,-1523.3 916.01,-1519.03 918.09,-1526.15 922.08,-1523.3"/>
<text text-anchor="middle" x="950.87" y="-1550.96" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- u_txn_update -->
<g id="node39" class="node">
<title>u_txn_update</title>
<polygon fill="none" stroke="black" points="1036.25,-1208.64 865.75,-1208.64 865.75,-1172.64 1036.25,-1172.64 1036.25,-1208.64"/>
<text text-anchor="middle" x="951" y="-1192.39" font-family="Helvetica,sans-Serif" font-size="10.00">NewVersion:update is transactional</text>
<text text-anchor="middle" x="951" y="-1181.14" font-family="Helvetica,sans-Serif" font-size="10.00">(replace&#45;in&#45;slot)</text>
</g>
<!-- u_is_deep&#45;&gt;u_txn_update -->
<g id="edge22" class="edge">
<title>u_is_deep&#45;&gt;u_txn_update</title>
<path fill="none" stroke="black" d="M991.09,-1594.65C1007.82,-1576.17 1036,-1539.53 1036,-1502.26 1036,-1502.26 1036,-1502.26 1036,-1286.76 1036,-1255.92 1010.85,-1230.48 987.91,-1213.7"/>
<polygon fill="black" stroke="black" points="989.58,-1211.88 982.45,-1209.86 986.76,-1215.89 989.58,-1211.88"/>
<text text-anchor="middle" x="1041.25" y="-1390.84" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- u_newer_same_slot -->
<g id="node36" class="node">
<title>u_newer_same_slot</title>
<polygon fill="none" stroke="black" points="817,-1425.01 699,-1394.51 817,-1364.01 935,-1394.51 817,-1425.01"/>
<text text-anchor="middle" x="817" y="-1396.26" font-family="Helvetica,sans-Serif" font-size="10.00">newer version available</text>
<text text-anchor="middle" x="817" y="-1385.01" font-family="Helvetica,sans-Serif" font-size="10.00">(same slot)?</text>
</g>
<!-- u_dep_installed&#45;&gt;u_newer_same_slot -->
<g id="edge23" class="edge">
<title>u_dep_installed&#45;&gt;u_newer_same_slot</title>
<path fill="none" stroke="black" d="M891.16,-1484.8C878.42,-1469.47 858.54,-1445.53 842.57,-1426.3"/>
<polygon fill="black" stroke="black" points="844.65,-1424.96 838.29,-1421.14 840.88,-1428.09 844.65,-1424.96"/>
<text text-anchor="middle" x="870.23" y="-1444.21" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- u_keep_dep -->
<g id="node38" class="node">
<title>u_keep_dep</title>
<polygon fill="none" stroke="black" points="1016.75,-1305.76 885.25,-1305.76 885.25,-1269.76 1016.75,-1269.76 1016.75,-1305.76"/>
<text text-anchor="middle" x="951" y="-1289.51" font-family="Helvetica,sans-Serif" font-size="10.00">keep installed dependency</text>
<text text-anchor="middle" x="951" y="-1278.26" font-family="Helvetica,sans-Serif" font-size="10.00">(no update goal)</text>
</g>
<!-- u_dep_installed&#45;&gt;u_keep_dep -->
<g id="edge24" class="edge">
<title>u_dep_installed&#45;&gt;u_keep_dep</title>
<path fill="none" stroke="black" d="M914.91,-1484.68C924.51,-1470.04 937.88,-1447.11 944,-1425.01 954.37,-1387.52 954.32,-1342.06 952.95,-1314.28"/>
<polygon fill="black" stroke="black" points="955.4,-1314.28 952.55,-1307.43 950.51,-1314.56 955.4,-1314.28"/>
<text text-anchor="middle" x="958.14" y="-1390.84" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- u_sched_dep_update -->
<g id="node37" class="node">
<title>u_sched_dep_update</title>
<polygon fill="none" stroke="black" points="867.62,-1305.76 732.38,-1305.76 732.38,-1269.76 867.62,-1269.76 867.62,-1305.76"/>
<text text-anchor="middle" x="800" y="-1289.51" font-family="Helvetica,sans-Serif" font-size="10.00">schedule DepLatest:update</text>
<text text-anchor="middle" x="800" y="-1278.26" font-family="Helvetica,sans-Serif" font-size="10.00">(replaces DepInstalled)</text>
</g>
<!-- u_newer_same_slot&#45;&gt;u_sched_dep_update -->
<g id="edge25" class="edge">
<title>u_newer_same_slot&#45;&gt;u_sched_dep_update</title>
<path fill="none" stroke="black" d="M812.35,-1364.89C809.78,-1349.04 806.61,-1329.52 804.13,-1314.21"/>
<polygon fill="black" stroke="black" points="806.61,-1314.2 803.07,-1307.68 801.77,-1314.99 806.61,-1314.2"/>
<text text-anchor="middle" x="816.13" y="-1337.46" font-family="Helvetica,sans-Serif" font-size="9.00">yes</text>
</g>
<!-- u_newer_same_slot&#45;&gt;u_keep_dep -->
<g id="edge26" class="edge">
<title>u_newer_same_slot&#45;&gt;u_keep_dep</title>
<path fill="none" stroke="black" d="M845.75,-1371.04C868.42,-1353.31 899.89,-1328.71 922.51,-1311.03"/>
<polygon fill="black" stroke="black" points="923.73,-1313.19 927.73,-1306.95 920.71,-1309.33 923.73,-1313.19"/>
<text text-anchor="middle" x="893.27" y="-1337.46" font-family="Helvetica,sans-Serif" font-size="9.00">no</text>
</g>
<!-- u_sched_dep_update&#45;&gt;u_txn_update -->
<g id="edge27" class="edge">
<title>u_sched_dep_update&#45;&gt;u_txn_update</title>
<path fill="none" stroke="black" d="M827.7,-1269.31C852.63,-1253.61 889.38,-1230.46 916.27,-1213.52"/>
<polygon fill="black" stroke="black" points="917.33,-1215.74 921.94,-1209.94 914.72,-1211.6 917.33,-1215.74"/>
</g>
<!-- u_keep_dep&#45;&gt;u_txn_update -->
<g id="edge28" class="edge">
<title>u_keep_dep&#45;&gt;u_txn_update</title>
<path fill="none" stroke="black" d="M951,-1269.31C951,-1254.7 951,-1233.64 951,-1217.13"/>
<polygon fill="black" stroke="black" points="953.45,-1217.49 951,-1210.49 948.55,-1217.49 953.45,-1217.49"/>
</g>
</g>
</svg>
